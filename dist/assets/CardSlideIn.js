import{h as w,i as A,s as y,f as v,j as S,k as g,e as F,l as b}from"./index.js";function h(i){return w()?(A(i),!0):!1}const k=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const T=k?window:void 0;function q(i,l={}){const{immediate:f=!0,fpsLimit:r=void 0,window:e=T,once:c=!1}=l,o=y(!1),n=v(()=>r?1e3/S(r):null);let t=0,a=null;function s(u){if(!o.value||!e)return;t||(t=u);const p=u-t;if(n.value&&p<n.value){a=e.requestAnimationFrame(s);return}if(t=u,i({delta:p,timestamp:u}),c){o.value=!1,a=null;return}a=e.requestAnimationFrame(s)}function d(){!o.value&&e&&(o.value=!0,t=0,a=e.requestAnimationFrame(s))}function m(){o.value=!1,a!=null&&e&&(e.cancelAnimationFrame(a),a=null)}return f&&d(),h(m),{isActive:g(o),pause:m,resume:d}}function I(i,l=2e3,f=40){const r=F(0);let e;const c=v(()=>`transform: translateY(${(1-r.value)*f}vh); transition: transform 0.8s; background: var(--page-side-bg);`);function o(){r.value=0,e&&e(),e=q(({elapsed:n})=>{const t=Math.min(n/l,1);r.value=t,t===1&&e&&e()}).stop}return b(()=>{let n=!1;function t(){if(!i){o(),n=!0;return}const a=setTimeout(()=>{n||(o(),n=!0)},2e3),s=new window.Image;s.src=i,s.onload=()=>{n||(clearTimeout(a),o(),n=!0)}}document.readyState==="complete"?t():window.addEventListener("load",t)}),c}export{I as u};
